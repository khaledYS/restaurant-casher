var X=Object.defineProperty;var E=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var M=(s,r,l)=>r in s?X(s,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[r]=l,N=(s,r)=>{for(var l in r||(r={}))J.call(r,l)&&M(s,l,r[l]);if(E)for(var l of E(r))Y.call(r,l)&&M(s,l,r[l]);return s};import{i as Z,L as ee,j as z,r as c,u as F,a as U,o as te,g as D,O as le,D as G,h as K,V,b as L,I as re,G as se,s as oe,c as A,d as ne,F as ie,e as ae,f as W,k as ce,w as de,l as O,T as ue,m as fe,v as T,U as C,n as j,Q as k,K as R,E as me,R as he,p as pe,B as xe,q as be,t as g}from"./vendor.e755e5ed.js";const ge=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function l(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(t){if(t.ep)return;t.ep=!0;const a=l(t);fetch(t.href,a)}};ge();const ve={apiKey:"AIzaSyD1AouPxpWcnBel0K_X81drpT5gG7-IR1I",authDomain:"restaurant-casher.firebaseapp.com",projectId:"restaurant-casher",storageBucket:"restaurant-casher.appspot.com",messagingSenderId:"1043607858011",appId:"1:1043607858011:web:3256bc04d8bd4b01c4487e"},_=Z(ve),B=ee(_);const e=z.exports.jsx,o=z.exports.jsxs;function ye(){return e("div",{className:"Loding-component w-[100vw] h-[100vh] backdrop-blur-lg fixed z-50 top-0 left-0 grid place-items-center",children:e("div",{className:"p-2 bg-gray-800 rounded-2xl border-zinc-100 border-2",children:o("div",{className:"lds-spinner",children:[e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{})]})})})}const P=c.exports.createContext(null),$=c.exports.createContext(null);function we(){const[s,r]=c.exports.useState(null),[l,d]=c.exports.useState(null),t=F(),a=U();return c.exports.useEffect(()=>{d(!0),te(D(),async p=>{if(p){console.log("user Is signed in, user should be redirected to welcome page");const x=D(_),u=G(B,"users",x.currentUser.uid),f=await K(u);if(f.exists())r(f.data());else{const n={uid:x.currentUser.uid,name:x.currentUser.displayName,created:V(),position:"employer"};await L(u,N({},n)),r(n)}d(!1),console.log(t),(t.pathname=="/login"||t.pathname=="/")&&a("/welcome")}else{if(console.log("user Is signed out, user should be redirected to login page"),d(!1),console.log(t),t.pathname=="/login")return;a("/login")}})},[]),c.exports.useEffect(()=>{console.log(s)},[s]),e("div",{className:"app font-sans App w-[100vw] h-[100vh] bg-slate-900 flex flex-col justify-center items-center  text-white",children:o(P.Provider,{value:{user:s,setUser:r},children:[l&&e(ye,{}),e($.Provider,{value:{setLoading:d},children:e(le,{})})]})})}function Ne(){return e("h1",{className:"PageNotFound-component ",children:"oobs, you came to the wrong side."})}function S({title:s="Button",className:r="Btn-component min-w-[300px] rounded-lg px-8 py-6 bg-gray-600 hover:bg-gray-700  text-4xl my-4 cursor-pointer flex justify-between items-center",styles:l={},children:d}){return o("button",{className:r,style:N({},l),children:[s,"\u2002",d]})}function Be(s){const[r,l]=c.exports.useState(!1);U();const{setLoading:d}=c.exports.useContext($);async function t(){try{d(!0),await l(!0);const a=await D(),p=await new se;await oe(a,p),d(!1)}catch{d(!1),await l(!1)}}return e("div",{className:"Login-component w-fit flex flex-col items-stretch text-center",children:o("div",{className:`${r&&"pointer-events-none bg-gray-700 cursor-wait"}`,onClick:t,children:[o(S,{title:"Login",children:[" ",e(re,{})," "]})," "]})})}function Ie(s){const{user:r,setUser:l}=c.exports.useContext(P);return o("div",{className:"Welcome-component ",children:[e(A,{to:"order",children:e(S,{title:"Order",children:e(ne,{})})}),e(A,{to:"bills",children:e(S,{title:"Bills",children:e(ie,{})})}),r&&r.position=="admin"&&e(A,{to:"dashboard",children:e(S,{title:"Dashboard",children:e(ae,{})})})]})}function Ce({id:s,billItemId:r,title:l,category:d,removeFromBill:t,cost:a}){return e(W.Provider,{value:{color:"red",size:"3rem"},children:o("div",{id:s,title:l,"category-name":d,cost:a,"bill-item-id":r,className:"BillItem-component min-w-fit break-all flex justify-between items-center rounded-lg px-1 py-1 mx-1 my-1 flex-nowrap text-center bg-gray-600 hover:bg-gray-700 text-2xl",children:[e("span",{style:{wordBreak:"break-word"},children:l}),o("div",{className:"flex ml-auto items-center min-w-fit",children:[o("span",{children:[a,"$"]}),e(ce,{onClick:()=>{t(r)},className:"cursor-pointer"})]})]})})}function je({title:s="Button",className:r="CategoriesBtn-component min-w-max  flex justify-center items-center rounded-lg px-2 py-4 mx-1 text-center bg-slate-600 hover:bg-slate-400 text-3xl sm:text-2xl cursor-pointer",styles:l={},onClick:d=()=>{},children:t}){return o("button",{className:r,style:N({},l),onClick:d,children:[s,"\u2002",t]})}function ke({title:s,category:r,id:l,addToBill:d,cost:t}){return o("button",{id:l,cost:t,"category-name":r,title:s,onClick:()=>{d(l,s,r,t)},className:"CategoryItem-component min-w-none max-w-fit mx-4 rounded-lg px-6 py-4 md:px-5 md:py-3 sm:px-4 sm:py-3 bg-gray-600 hover:bg-gray-700  text-2xl my-2 md:my-1 cursor-pointer flex items-center justify-between",children:[s,"\xA0"]})}function Se(){const{user:s}=c.exports.useContext(P);console.log(s);const{setLoading:r}=c.exports.useContext($),[l,d]=c.exports.useState(null),[t,a]=c.exports.useState(null),[p,x]=c.exports.useState(null),[u,f]=c.exports.useState(!0),[n,b]=c.exports.useState([]),[y,w]=c.exports.useState(0);function I(i,m,h,v){const Q=T();b([{id:i,title:m,category:h,cost:v,billItemId:Q},...n])}function q(i){const m=n.filter(h=>h.billItemId!=i);b(m)}c.exports.useEffect(()=>{(async()=>{const i=await de(O(B,"products"));d(i.docs.map(m=>({[m.id]:m.data()}))),f(!1)})()},[]),c.exports.useEffect(()=>{if(typeof l=="object")try{let i=l.find(h=>t==Object.keys(h)[0]);i=i[Object.keys(i)[0]];let m=[];for(let h in i)m.push([h,i[h]]);x(m)}catch(i){console.warn(i)}},[t]);function H(){let i=0;for(let m of n)i+=m.cost;w(i)}return c.exports.useEffect(()=>{H(),console.log(n)},[n]),o("div",{className:"order-component w-full h-full flex",children:[o("div",{className:"products  h-full w-8/12 md:w-7/12 sm:w-1/2",children:[e("div",{className:"catogries border-b-8 border-gray-500 h-1/6 overflow-x-auto flex justify-start items-stretch py-4 flex-nowrap",children:l&&l.map(i=>e(je,{onClick:()=>{a(Object.keys(i)[0])},title:Object.keys(i)[0]},Object.keys(i)[0]))}),e("div",{className:"products h-5/6 overflow-y-auto flex justify-center content-start flex-wrap",children:p&&p.map(i=>{let m=i[0],h=i[1];return e(ke,{id:m,category:t,title:h.name,cost:h.cost,addToBill:I},m)})})]}),o("div",{className:"bill     border-l-8 border-gray-500 h-full w-4/12 md:w-5/12 sm:w-1/2",children:[o("div",{className:"up-navbar-of-bill cursor-default h-1/6 flex flex-col justify-center items-center text-4xl font-mono relative",children:[o("div",{className:"h-3/6 flex flex-col justify-center items-center relative w-full",children:[e("h1",{children:"Bill"}),e("div",{className:"hr border-b-4 border-gray-500 w-full border-x-0 "})]}),o("div",{className:"h-3/6 flex w-full flex-col",children:[o("div",{className:"flex  flex-nowrap text-2xl justify-around w-full items-center",children:[o("span",{children:[y||0,"$"]}),e("button",{className:"px-4 py-2 self-center bg-red-800 hover:bg-red-700 rounded-lg",onClick:()=>{window.confirm("Are you sure you want to reset the bill?")&&(b([]),w(0))},children:"Reset"})]}),e("div",{className:"hr border-b-8 basis-full border-gray-500 w-full border-x-0"})]})]}),o("div",{className:"bill-orders h-5/6",children:[e("div",{className:"orders-panel overflow-y-auto overflow-x-hidden h-5/6 flex flex-col ",children:n&&n.map(i=>e(Ce,{billItemId:i.billItemId,title:i.title,category:i.category,removeFromBill:q,id:i.id,cost:i.cost},i.billItemId))}),e("div",{className:"bill-orders-send overflow-hidden p-1 h-1/6 border-t-8 border-gray-500 flex justify-center items-center",children:o("button",{className:`flex-nowrap rounded-lg overflow-hidden w-full px-2 py-6 bg-gray-600 hover:bg-gray-700  text-4xl my-4 cursor-pointer flex justify-between items-center ${u&&"pointer-events-none bg-gray-700"} `,onClick:async()=>{if(n.length==0||!window.confirm("Are you sure to submit the Bill?"))return;r(!0),f(!0);let m=G(B,"others/billsSettings"),h=await K(m);h=h.data().lastBillIdNumber,console.log(h);let v;h>=300?(await L(m,{lastBillIdNumber:1},{merge:!0}),v=1):(v=h+1,await L(m,{lastBillIdNumber:v},{merge:!0})),await ue(O(B,"bills"),{billIDNumber:v,bill:n,billTotalBalance:y,submittedBy:s.name,finished:!1,finishedBy:null,deleted:!1,deletedBy:null,createdAt:V()}),b([]),f(!1),r(!1)},children:["Done",e(W.Provider,{value:{color:"#8ff565",size:"2.5rem"},children:e(fe,{})})]})})]})]})]})}function De(){return o("div",{className:"Dashboard-component",children:[e("div",{className:"products"}),e("div",{className:"ordered"})]})}function Le({bill:s,setCurrentBill:r,currentBill:l}){function d(a){var p=Math.floor(a%1e3/100),x=Math.floor(a/1e3%60),u=Math.floor(a/(1e3*60)%60),f=Math.floor(a/(1e3*60*60)%24),n=Math.floor(a/(1e3*60*60*24)%24);n=Number(n<10?"0"+n:n),f=Number(f<10?"0"+f:f),u=Number(u<10?"0"+u:u),x=Number(x<10?"0"+x:x);let b=n+"days - "+f+"hours - "+u+"minutes - "+x+"."+p+"seconds";return n>=1?{time:b,span:`${n}D - ${f}H ago`}:f>=1?{time:b,span:`${f}H - ${u}M ago`}:{time:b,span:`${u}M - ${x}S ago`}}const t=d(new Date-s.createdAt.toDate());return o("div",{className:`${l&&s.id==l.id&&"activeCurrentBill"} bill text-black text-left w-full cursor-pointer hover:bg-white my-4 px-8 font-medium py-7 `,onClick:()=>{r(s)},children:[e("div",{className:"date w-full text-right text-gray-400",title:t.time,children:t.span}),o("div",{className:" upper font-bold text-left flex justify-around my-4",children:[o("div",{children:["Bill : ",s.billIDNumber]}),e("div",{className:`${s.finished?"finished":"notfinished"}`,children:`${s.finished?"Finished":"Not Finished"}`})]}),o("div",{className:"text-left",children:[o("div",{children:["Total amount : ",s.billTotalBalance]}),o("div",{children:["submitted by employ : ",s.submittedBy]})]})]})}function Ae(){const s=[{name:"All",active:!0},{name:"Confirmed",active:!1},{name:"Pending",active:!1},{name:"Deleted",active:!1}],r=c.exports.useRef(),[l,d]=c.exports.useState("All"),[t,a]=c.exports.useState(30),[p,x]=c.exports.useState([]),[u,f]=c.exports.useState(null);return c.exports.useEffect(()=>{(async()=>{const n=O(B,"bills");let b=C(n,k("createdAt","desc"),j(t));l.toLowerCase()=="pending"?b=C(n,R("finished","==",!1),k("createdAt","desc"),j(t)):l.toLowerCase()=="confirmed"?b=C(n,R("finished","==",!0),k("createdAt","desc"),j(t)):l.toLowerCase()=="deleted"&&(b=C(n,R("deleted","==",!0),k("createdAt","desc"),j(t))),me(b,y=>{let w=[];y.docs.forEach(I=>{w.push(N({id:I.id},I.data()))}),x(w),console.log("-----",t,l)})})(),console.log(u)},[t,l]),c.exports.useEffect(()=>{u&&(console.log(u.createdAt.toDate()),console.log(u.createdAt.toDate().toGMTString()))},[u]),F(),o("div",{className:"Bills-component flex flex-col h-full w-full bg-slate-100",children:[o("div",{className:"overflow-hiddennavbar flex justify-start items-start border-b-4 border-stone-300 bg-white w-full flex-col-reverse h-[14%] text-black shadow-lg z-10 rounded-b-3xl",children:[e("div",{className:"types w-8/12 flex justify-between sm:w-full md:w-10/12  items-stretch h-full px-8 smm:h-1/2",ref:r,children:s&&s.map(n=>e("button",{className:`${l==n.name?"activeLinkBtn":""} BillsTypesBtn flex justify-center items-center text-black text-lg font-normal px-2`,onClick:()=>{d(n.name)},children:n.name},T()))}),e("div",{className:"filtering border-stone-800 w-full h-full smm:h-1/2 flex justify-end items-center px-2 z-0",children:o("div",{className:"flex justify-center items-center",children:[e("label",{htmlFor:"rows",children:"Rows"}),o("select",{type:"number",id:"rows",className:"border-2 border-stone-800 rounded-lg px-3 py-1 mx-1 cursor-pointer focus-within:border-stone-400 hover:bg-cyan-200 focus-within:bg-cyan-200",defaultValue:t,onChange:n=>{a(Number(n.target.value))},children:[e("option",{value:"10",children:"10"}),e("option",{value:"20",defaultChecked:!0,children:"20"}),e("option",{value:"30",children:"30"}),e("option",{value:"40",children:"40"}),e("option",{value:"50",children:"50"}),e("option",{value:"60",children:"60"}),e("option",{value:"70",children:"70"}),e("option",{value:"80",children:"80"}),e("option",{value:"90",children:"90"}),e("option",{value:"100",children:"100"})]})]})})]}),o("div",{className:"workplace h-[86%] smm:h-[86%] bg-white flex ",children:[e("div",{style:{zIndex:"9"},className:"bills w-1/2 max-w-[50%] bg-[#eef3f7] after:w-full after:h-4 after:bg-slate-100 after:content-[''] after:absolute after:top-0 after:-translate-y-full relative h-full shadow-[0px_0px_10px_2px] shadow-[#c5c5c5] rounded-br-2xl rounded-tr-2xl",children:e("div",{className:"h-full flex flex-col w-full ",children:e("div",{className:"h-full w-full max-h-[100%] overflow-x-visible overflow-y-auto",children:p&&p.reverse().map(n=>e(Le,{bill:n,setCurrentBill:f,currentBill:u},T()))})})}),e("div",{className:"bill w-1/2 h-full text-gray-700",children:u&&o("div",{className:"relative pt-8  bg-white h-full w-full ",children:[e("span",{style:{transition:"all .2s ease-in-out",zIndex:"8"},title:"close this bill",className:"cursor-pointer absolute top-4 right-6 text-3xl text-gray-300 hover:text-white drop-shadow-lg py-1 px-6 bg-red-700 hover:bg-red-500 rounded-lg",onClick:()=>{f(null)},children:"X"}),o("div",{className:"my-2 text-xl ",children:[e("div",{className:"title text-3xl text-center block mb-4",children:"Bill"}),o("div",{className:"text-center",children:[o("div",{children:["BILL Number : ",e("span",{className:"font-medium",children:u.billIDNumber})]}),o("div",{children:["Bill Date : ",e("span",{className:"font-medium",children:u.createdAt.toDate().toUTCString()})]})]})]})]})})]})]})}he.render(e(pe.StrictMode,{children:e(xe,{children:e(be,{children:o(g,{path:"/",element:e(we,{}),children:[e(g,{path:"login",element:e(Be,{})}),e(g,{path:"welcome",element:e(Ie,{})}),e(g,{path:"welcome/dashboard",element:e(De,{})}),e(g,{path:"welcome/order",element:e(Se,{})}),e(g,{path:"welcome/bills",element:e(Ae,{})}),e(g,{path:"*",element:e(Ne,{})})]})})})}),document.getElementById("root"));
